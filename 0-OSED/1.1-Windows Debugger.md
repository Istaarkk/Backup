### üîç **1. What is a Debugger**

Un **debugger** est un programme qui s‚Äôintercale entre une application et le processeur (CPU) afin de permettre **l‚Äôanalyse, le contr√¥le et la manipulation** de l‚Äôex√©cution du code.

#### üß† √Ä retenir :

- Permet de visualiser l‚Äô√©tat m√©moire, les registres, le code d√©sassembl√©, etc.
    
- Outil **essentiel** pour l‚Äôexploitation, la r√©tro-ing√©nierie et l‚Äôanalyse des vuln√©rabilit√©s.
    

#### üèõÔ∏è Architecture syst√®me :

- La m√©moire est divis√©e en deux espaces :
    
    - **Kernel-mode** (Ring 0) : acc√®s privil√©gi√©
        
    - **User-mode** (Ring 3) : acc√®s restreint (o√π tournent les applis)
        

---

### üíª **2. Commandes WinDbg utiles**

|Commande|Description|
|---|---|
|`.reload /f`|Recharge les modules actuels (force reload)|
|`u [adresse]`|D√©sassemble √† partir d'une ou plusieurs adresses|
|`dd [adresse]`|Affiche des DWORDs (4 bytes)|
|`dw` / `dq` / `db`|Affiche en WORD (2B), QWORD (8B), BYTE (1B)|
|`dc`|Affiche les donn√©es en format ASCII lisible|
|`dd esp L4`|Affiche 4 DWORDs √† partir d‚ÄôESP|
|`dd poi(esp)`|Affiche la m√©moire point√©e par la valeur contenue dans `esp`|

---

### üß™ **3. Exemple : D√©sassemblage avec WinDbg**

#### Commande :

bash

CopierModifier

`u kernel32!GetCurrentThread`

#### R√©sultat :

asm

CopierModifier

``KERNEL32!GetCurrentThread: 00007ffa`00983510 48c7c0feffffff  mov     rax,0FFFFFFFFFFFFFFFEh 00007ffa`00983517 c3              ret``

#### Analyse :

- `mov rax, -2` : une **valeur de retour** est pr√©par√©e dans `RAX`
    
- `ret` : fin de fonction, retourne le contr√¥le avec `RAX` comme r√©sultat
    
- Valeur `RAX` = handle pseudo-constant pour le **thread courant** (`-2`)
    

---

### üìö **4. Lecture de la m√©moire**

#### Commandes :

|Commande|Description|
|---|---|
|`db`|Lecture m√©moire en **bytes (1B)**|
|`dw`|Lecture m√©moire en **words (2B)**|
|`dd`|Lecture m√©moire en **double words (4B)**|
|`dq`|Lecture m√©moire en **quad words (8B)**|
|`dc`|Lecture m√©moire en **format ASCII**|

#### Exemple 1 :


```asm
dc KERNELBASE
```


Visualise la m√©moire du module avec interpr√©tation ASCII (pratique pour les headers PE, etc.)

#### Exemple 2 :

```asm
dw KERNELBASE+0x40
```


Affiche les donn√©es en blocs de 2 bytes (utile pour visualiser les strings unicode ou instructions)

#### Param√®tre de longueur :

Par d√©faut, WinDbg affiche **0x80 bytes** de donn√©es. On peut modifier la longueur avec `L`.


```asm
dd esp L4     ; Affiche 4 DWORDs 
dd esp L10    ; Affiche 10 DWORDs
```


#### Utilisation de `poi()` :

- `poi(addr)` signifie "**Pointer Of Integer**", donc valeur situ√©e √† l‚Äôadresse point√©e.
    

```asm
`dd poi(esp)  ; Affiche la m√©moire au pointeur contenu dans ESP`
```


---

### üìù **5. R√©sum√© pratique**

|Objectif|Commande|
|---|---|
|Recharger les modules|`.reload /f`|
|Voir le code ASM|`u adresse`|
|Lire m√©moire (4B)|`dd adresse`|
|Lire m√©moire (ASCII)|`dc adresse`|
|Lire contenu point√©|`dd poi(adresse)`|
|Sauter dans une fonction|`g` (go) / `t` (step into) / `p` (step over)|
